!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("echarts")):"function"==typeof define&&define.amd?define(["echarts"],t):"object"==typeof exports?exports["echarts-liquidfill"]=t(require("echarts")):e["echarts-liquidfill"]=t(e.echarts)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(6)},function(t,r){t.exports=e},function(e,t,r){function n(e,t,r,n){if(!t)return e;var l=a(t[0]),u=i.isArray(l)&&l.length||1;r=r||[],n=n||"extra";for(var c=0;c<u;c++)if(!e[c]){var f=r[c]||n+(c-r.length);e[c]=o(t,c)?{type:"ordinal",name:f}:f}return e}function a(e){return i.isArray(e)?e:i.isObject(e)?e.value:e}var i=r(5),o=n.guessOrdinal=function(e,t){for(var r=0,n=e.length;r<n;r++){var o=a(e[r]);if(!i.isArray(o))return!1;var o=o[t];if(null!=o&&isFinite(o))return!1;if(i.isString(o)&&"-"!==o)return!0}return!1};e.exports=n},function(e,t){function r(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}var n={},a=1e-4;n.linearMap=function(e,t,r,n){var a=t[1]-t[0],i=r[1]-r[0];if(0===a)return 0===i?r[0]:(r[0]+r[1])/2;if(n)if(a>0){if(e<=t[0])return r[0];if(e>=t[1])return r[1]}else{if(e>=t[0])return r[0];if(e<=t[1])return r[1]}else{if(e===t[0])return r[0];if(e===t[1])return r[1]}return(e-t[0])/a*i+r[0]},n.parsePercent=function(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?r(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e},n.round=function(e,t){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),+(+e).toFixed(t)},n.asc=function(e){return e.sort(function(e,t){return e-t}),e},n.getPrecision=function(e){if(e=+e,isNaN(e))return 0;for(var t=1,r=0;Math.round(e*t)/t!==e;)t*=10,r++;return r},n.getPrecisionSafe=function(e){var t=e.toString(),r=t.indexOf(".");return r<0?0:t.length-1-r},n.getPixelPrecision=function(e,t){var r=Math.log,n=Math.LN10,a=Math.floor(r(e[1]-e[0])/n),i=Math.round(r(Math.abs(t[1]-t[0]))/n);return Math.max(-a+i,0)},n.MAX_SAFE_INTEGER=9007199254740991,n.remRadian=function(e){var t=2*Math.PI;return(e%t+t)%t},n.isRadianAroundZero=function(e){return e>-a&&e<a},n.parseDate=function(e){if(e instanceof Date)return e;if("string"==typeof e){var t=new Date(e);return isNaN(+t)&&(t=new Date(new Date(e.replace(/-/g,"/"))-new Date("1970/01/01"))),t}return new Date(Math.round(e))},n.quantity=function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},n.nice=function(e,t){var r,a=n.quantity(e),i=e/a;return r=t?i<1.5?1:i<2.5?2:i<4?3:i<7?5:10:i<1?1:i<2?2:i<3?3:i<5?5:10,r*a},e.exports=n},function(e,t){e.exports=function(e,t){var r={};t.eachRawSeriesByType(e,function(e){var n=e.getRawData(),a={};if(!t.isSeriesFiltered(e)){var i=e.getData();i.each(function(e){var t=i.getRawIndex(e);a[t]=e}),n.each(function(t){var o=n.getItemModel(t),l=a[t],u=null!=l&&i.getItemVisual(l,"color",!0);if(u)n.setItemVisual(t,"color",u);else{var c=o.get("itemStyle.normal.color")||e.getColorFromPalette(n.getName(t),r);n.setItemVisual(t,"color",c),null!=l&&i.setItemVisual(l,"color",c)}})}})}},function(e,t){function r(e){if("object"==typeof e&&null!==e){var t=e;if(e instanceof Array){t=[];for(var n=0,a=e.length;n<a;n++)t[n]=r(e[n])}else if(!I(e)&&!S(e)){t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=r(e[i]))}return t}return e}function n(e,t,a){if(!P(t)||!P(e))return a?r(t):e;for(var i in t)if(t.hasOwnProperty(i)){var o=e[i],l=t[i];!P(l)||!P(o)||w(l)||w(o)||S(l)||S(o)||I(l)||I(o)?!a&&i in e||(e[i]=r(t[i],!0)):n(o,l,a)}return e}function a(e,t){for(var r=e[0],a=1,i=e.length;a<i;a++)r=n(r,e[a],t);return r}function i(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function o(e,t,r){for(var n in t)t.hasOwnProperty(n)&&(r?null!=t[n]:null==e[n])&&(e[n]=t[n]);return e}function l(){return document.createElement("canvas")}function u(){return L||(L=R.createCanvas().getContext("2d")),L}function c(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function f(e,t){function r(){}var n=e.prototype;r.prototype=t.prototype,e.prototype=new r;for(var a in n)e.prototype[a]=n[a];e.prototype.constructor=e,e.superClass=t}function s(e,t,r){e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,o(e,t,r)}function p(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function h(e,t,r){if(e&&t)if(e.forEach&&e.forEach===O)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,a=e.length;n<a;n++)t.call(r,e[n],n,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(r,e[i],i,e)}function d(e,t,r){if(e&&t){if(e.map&&e.map===N)return e.map(t,r);for(var n=[],a=0,i=e.length;a<i;a++)n.push(t.call(r,e[a],a,e));return n}}function g(e,t,r,n){if(e&&t){if(e.reduce&&e.reduce===V)return e.reduce(t,r,n);for(var a=0,i=e.length;a<i;a++)r=t.call(n,r,e[a],a,e);return r}}function v(e,t,r){if(e&&t){if(e.filter&&e.filter===T)return e.filter(t,r);for(var n=[],a=0,i=e.length;a<i;a++)t.call(r,e[a],a,e)&&n.push(e[a]);return n}}function y(e,t,r){if(e&&t)for(var n=0,a=e.length;n<a;n++)if(t.call(r,e[n],n,e))return e[n]}function m(e,t){var r=q.call(arguments,2);return function(){return e.apply(t,r.concat(q.call(arguments)))}}function x(e){var t=q.call(arguments,1);return function(){return e.apply(this,t.concat(q.call(arguments)))}}function w(e){return"[object Array]"===j.call(e)}function M(e){return"function"==typeof e}function b(e){return"[object String]"===j.call(e)}function P(e){var t=typeof e;return"function"===t||!!e&&"object"==t}function I(e){return!!A[j.call(e)]}function S(e){return e&&1===e.nodeType&&"string"==typeof e.nodeName}function F(e){for(var t=0,r=arguments.length;t<r;t++)if(null!=arguments[t])return arguments[t]}function C(){return Function.call.apply(q,arguments)}function D(e,t){if(!e)throw new Error(t)}var L,A={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1},j=Object.prototype.toString,E=Array.prototype,O=E.forEach,T=E.filter,q=E.slice,N=E.map,V=E.reduce,R={inherits:f,mixin:s,clone:r,merge:n,mergeAll:a,extend:i,defaults:o,getContext:u,createCanvas:l,indexOf:c,slice:C,find:y,isArrayLike:p,each:h,map:d,reduce:g,filter:v,bind:m,curry:x,isArray:w,isString:b,isObject:P,isFunction:M,isBuildInObject:I,isDom:S,retrieve:F,assert:D,noop:function(){}};e.exports=R},function(e,t,r){var n=r(1);r(8),r(9),n.registerVisual(n.util.curry(r(4),"liquidFill"))},function(e,t,r){function n(e,t,r,n){return 0===t?[[e+.5*r/Math.PI/2,n/2],[e+.5*r/Math.PI,n],[e+r/4,n]]:1===t?[[e+.5*r/Math.PI/2*(Math.PI-2),n],[e+.5*r/Math.PI/2*(Math.PI-1),n/2],[e+r/4,0]]:2===t?[[e+.5*r/Math.PI/2,-n/2],[e+.5*r/Math.PI,-n],[e+r/4,-n]]:[[e+.5*r/Math.PI/2*(Math.PI-2),-n],[e+.5*r/Math.PI/2*(Math.PI-1),-n/2],[e+r/4,0]]}var a=r(1);e.exports=a.graphic.extendShape({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,cx:0,cy:0,waterLevel:0,amplitude:0,borderWidth:0,borderDistance:0,phase:0,inverse:!1},style:{fill:"#0f0"},buildPath:function(e,t){for(var r=2*Math.ceil(2*t.radius/t.waveLength*4);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;t.phase>0;)t.phase-=2*Math.PI;var a=t.phase/Math.PI/2*t.waveLength,i=t.cx-t.radius+a-2*t.radius;e.moveTo(i,t.waterLevel);for(var o=0,l=0;l<r;++l){var u=l%4,c=n(l*t.waveLength/4,u,t.waveLength,t.amplitude);e.bezierCurveTo(c[0][0]+i,-c[0][1]+t.waterLevel,c[1][0]+i,-c[1][1]+t.waterLevel,c[2][0]+i,-c[2][1]+t.waterLevel),l===r-1&&(o=c[2][0])}t.inverse?(e.lineTo(o+i,t.cy-t.radius),e.lineTo(i,t.cy-t.radius),e.lineTo(i,t.waterLevel)):(e.lineTo(o+i,t.cy+t.radius),e.lineTo(i,t.cy+t.radius),e.lineTo(i,t.waterLevel)),e.closePath()}})},function(e,t,r){var n=r(2),a=r(1);a.extendSeriesModel({type:"series.liquidFill",visualColorAccessPath:"textStyle.normal.color",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,t){var r=n(["value"],e.data),i=new a.List(r,this);return i.initData(e.data),i},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:20,waveLength:"80%",phase:"auto",period:"auto",direction:"right",animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{borderDistance:10,itemStyle:{borderColor:"#294D99",borderWidth:10}},itemStyle:{normal:{backgroundColor:"#E3F7FF",opacity:.95},emphasis:{opacity:.8}},label:{normal:{show:!0,textStyle:{color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold"},textAlign:"center",textVerticalAlign:"middle"},emphasis:{textStyle:{color:"#156ACF",insideColor:"#E3F7FF",fontSize:50,fontWeight:"bold"}}}}})},function(e,t,r){var n=r(1),a=r(3),i=a.parsePercent,o=r(7);n.extendChartView({type:"liquidFill",render:function(e,t,r){function a(){return new n.graphic.Circle({shape:{cx:b,cy:P,r:d},style:{fill:g}})}function l(e,t,r){var a=s.getItemModel(e),i=a.getModel("itemStyle"),l=a.get("phase"),u=a.get("amplitude"),c=a.get("itemStyle.normal.opacity"),f=s.get("value",e),p=d-f*d*2;l=r?r.shape.phase:"auto"===l?e*Math.PI/4:l;var h=s.getItemVisual(e,"color"),g=2*d,v=new o({shape:{waveLength:L,radius:d,cx:g,cy:0,waterLevel:p,amplitude:u,borderWidth:y,borderDistance:F,phase:l,inverse:t},style:{fill:h,opacity:c},position:[b,P]});v.shape._waterLevel=p;var m=i.getModel("emphasis").getItemStyle();return m.lineWidth=0,n.graphic.setHoverStyle(v,m),v.setClipPath(new n.graphic.Circle({shape:{cx:0,cy:0,r:d}})),v}function u(e,t,r){var n=s.getItemModel(e),a=n.get("period"),i=n.get("direction"),o=s.get("value",e),l=(s.get("value",0),n.get("phase"));l=r?r.shape.phase:"auto"===l?e*Math.PI/4:l;var u=function(t){var r=s.count();return 0===r?t:t*(.2+(r-e)/r*.8)},c=0;c="auto"===a?u(5e3):"function"==typeof a?a(o,e):a;var f=0;"right"===i||void 0==i?f=Math.PI:"left"===i?f=-Math.PI:"none"===i?f=0:console.error("Illegal direction value for liquid fill."),t.animate().stop(),"none"!==i&&t.animate("shape",!0).when(0,{phase:l}).when(c/2,{phase:f+l}).when(c,{phase:2*f+l}).during(function(){C&&C.dirty(!0)}).start()}function c(e){function t(){var e=s.get("value",0),t=r.get("formatter");if(!t)return Math.ceil(100*e)+"%";if("string"==typeof t)return t.replace("{value}",e||"");if("function"==typeof t){for(var n=[],a=0;a<s._rawData.length;++a)n.push(s.get("value",a));return t(n)}}var r=p.getModel("label.normal"),a=p.getModel("label.emphasis"),i=r.getModel("textStyle"),o=a.getModel("textStyle"),l={text:t(),x:b,y:P,fill:i.get("color"),textAlign:r.get("textAlign"),textVerticalAlign:r.get("textVerticalAlign"),textFont:i.getFont()},u=new n.graphic.Text({style:l}),c=Object.assign({},l);c.fill=i.get("insideColor");var f=new n.graphic.Text({style:c}),h=Object.assign({},l);h.fill=o.get("color"),h.textFont=o.getFont(),u.hoverStyle=h;var g=Object.assign({},l);g.fill=o.get("insideColor"),g.textFont=o.getFont(),f.hoverStyle=g;var v=new n.graphic.Circle({shape:{cx:0,cy:0,r:d}});C=new n.graphic.CompoundPath({shape:{paths:e},position:[b,P]}),C.setClipPath(v),f.setClipPath(C),f.z2=10,u.z2=10;var y=new n.graphic.Group;return y.add(u),y.add(f),n.graphic.setHoverStyle(y),y}var f=this.group;f.removeAll();var s=e.getData(),p=s.getItemModel(0),h=p.get("center"),d=p.get("radius"),g=e.get("itemStyle.normal.backgroundColor"),v=e.get("outline.itemStyle.borderColor"),y=e.get("outline.itemStyle.borderWidth"),m=e.get("outline.borderDistance"),x=r.getWidth(),w=r.getHeight(),M=Math.min(x,w),b=i(h[0],x),P=i(h[1],w),y=i(y,M),I=i(d,M)/2,S=I-y,F=i(m,M),C=null,D=new n.graphic.Ring({shape:{cx:b,cy:P,r:S,r0:I},style:{fill:v}});f.add(D),d=S-F;var L=i(p.get("waveLength"),2*d);f.add(a());var A=this._data,j=[];s.diff(A).add(function(t){var r=l(t,!1),a=r.shape.waterLevel;r.shape.waterLevel=d,n.graphic.initProps(r,{shape:{waterLevel:a}},e),u(t,r,null),f.add(r),s.setItemGraphicEl(t,r),j.push(r)}).update(function(t,r){var a=A.getItemGraphicEl(r),i=l(t,!1,a);n.graphic.updateProps(a,{shape:i.shape},e),u(t,a,a),f.add(a),s.setItemGraphicEl(t,a),j.push(a)}).remove(function(e){var t=A.getItemGraphicEl(e);f.remove(t)}).execute(),f.add(c(j)),this._data=s}})}])});